(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["zh_zbkq-pages-index-sssj"],{"0f57":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"uni-page-body[data-v-6ecc62b6]{overflow-x:hidden}.weui-search-bar[data-v-6ecc62b6]{position:relative;padding:%?10?% %?10?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#efeff4;border-top:0 solid #d7d6dc;border-bottom:0 solid #d7d6dc;border-radius:60px}.weui-search-bar__form[data-v-6ecc62b6]{border-radius:60px}.search-log[data-v-6ecc62b6]{border:1px solid #eee!important;display:inline-block!important;margin-left:10px!important;margin-top:8px!important;border-radius:5px;padding-left:14px;padding-right:14px;-webkit-box-sizing:border-box;box-sizing:border-box;text-align:center;text-decoration:none;line-height:2}.clear-search-log[data-v-6ecc62b6]{margin:%?20?% auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?28?%}.clear-search-log uni-image[data-v-6ecc62b6]{margin-left:%?10?%;width:%?60?%;height:%?60?%}.weui-icon-search[data-v-6ecc62b6]{line-height:%?80?%}.weui-search-bar__input[data-v-6ecc62b6]{height:%?80?%;font-size:%?30?%}.weui-search-bar__label[data-v-6ecc62b6]{line-height:%?80?%;border-radius:60px}.weui-search-bar__box[data-v-6ecc62b6]{line-height:%?80?%}.weui-search-bar__cancel-btn[data-v-6ecc62b6]{margin-left:5px;margin-right:5px;color:#f44444;font-size:%?30?%;line-height:%?80?%}.weui-search-bar__text[data-v-6ecc62b6]{font-size:%?30?%;line-height:%?80?%;vertical-align:top}.jzz[data-v-6ecc62b6]{height:%?80?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?30?%;color:#666;background:#fff}.jzz uni-image[data-v-6ecc62b6]{width:%?60?%;height:%?60?%;margin-right:%?30?%}@-webkit-keyframes rotation-data-v-6ecc62b6{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}.Rotation[data-v-6ecc62b6]{-webkit-transform:rotate(1turn);-webkit-animation:rotation-data-v-6ecc62b6 1s linear infinite;animation:rotation-data-v-6ecc62b6 1s linear infinite}.kong[data-v-6ecc62b6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:%?30?%;color:#999}.kong uni-image[data-v-6ecc62b6]{margin:%?30?% 0;width:%?100?%;height:%?100?%}.main-bd-hd[data-v-6ecc62b6]{height:%?60?%;text-align:center;font-size:%?30?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;border-bottom:1px solid #e5e5e5}.line[data-v-6ecc62b6]{width:%?90?%;height:1px;background:#d2d2d2}.main-list[data-v-6ecc62b6]{padding:%?15?% %?25?%;border:1px solid #e5e5e5;border-top:none;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row}.main-left[data-v-6ecc62b6]{width:20vw;height:20vw}.main-left uni-image[data-v-6ecc62b6]{width:100%;height:100%;border-radius:%?10?%}.main-right[data-v-6ecc62b6]{margin-left:%?20?%;width:70vw}.main-rh[data-v-6ecc62b6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr1[data-v-6ecc62b6]{width:40vw;font-weight:600;height:%?50?%;font-size:%?30?%;color:#333;font-family:STHeiti}.mr2[data-v-6ecc62b6]{height:%?50?%;font-size:%?25?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr6[data-v-6ecc62b6]{height:%?50?%;font-size:%?25?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr6 uni-image[data-v-6ecc62b6]{width:%?30?%;height:%?30?%}.mr6 uni-text[data-v-6ecc62b6]{color:#f44444;margin-left:%?10?%}.mr2-left[data-v-6ecc62b6]{color:#f44444;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr2-left uni-text[data-v-6ecc62b6]{margin-left:%?10?%}.mr2-right[data-v-6ecc62b6]{color:#666;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr2-right uni-text[data-v-6ecc62b6]{margin-left:%?10?%;color:#000}.mr2 uni-image[data-v-6ecc62b6]{width:%?30?%;height:%?30?%}.mr3[data-v-6ecc62b6]{height:%?50?%;font-size:%?27?%;color:#999;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;line-height:%?50?%}.mr4[data-v-6ecc62b6]{margin-top:%?10?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr4-1[data-v-6ecc62b6]{width:%?40?%;height:%?40?%;line-height:%?40?%;text-align:center;font-size:%?28?%;color:#fff;background:#43a93c;border-radius:2px}.mr4-2[data-v-6ecc62b6]{font-size:%?30?%;color:#666;margin-left:%?10?%}.mr4-3[data-v-6ecc62b6]{font-size:%?27?%;color:#999;margin-left:%?10?%}.mr5[data-v-6ecc62b6]{margin-top:%?10?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.mr5-1[data-v-6ecc62b6]{width:%?40?%;height:%?40?%;line-height:%?40?%;text-align:center;font-size:%?28?%;color:#fff;background:#ffa52a;border-radius:2px}.mr5-2[data-v-6ecc62b6]{font-size:%?30?%;color:#666;margin-left:%?10?%}.mr5-3[data-v-6ecc62b6]{width:%?200?%;font-size:%?27?%;color:#999;margin-left:%?10?%;overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap}.pingjia_fenshu3[data-v-6ecc62b6]{position:relative;margin-right:%?10?%;width:%?150?%;height:%?30?%}.kximg[data-v-6ecc62b6]{position:absolute;width:%?150?%;height:%?30?%}.kximg uni-image[data-v-6ecc62b6]{position:absolute;width:%?150?%;height:%?30?%}.sximg[data-v-6ecc62b6]{position:absolute;width:%?150?%;height:%?30?%;overflow:hidden}.sximg uni-image[data-v-6ecc62b6]{position:absolute;width:%?150?%;height:%?30?%}.text2-xj[data-v-6ecc62b6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.text2-fs[data-v-6ecc62b6]{color:#ff8c00;height:%?30?%;line-height:%?35?%}.copyright[data-v-6ecc62b6]{height:%?120?%;padding:%?20?%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding-top:%?80?%}.copyright_logo[data-v-6ecc62b6]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}.copyright_img[data-v-6ecc62b6]{width:%?40?%;height:%?40?%;margin-right:%?10?%;border-radius:%?6?%}.copyright_text[data-v-6ecc62b6]{color:#ccc;font-size:%?32?%;font-weight:700}.copyright_txt[data-v-6ecc62b6]{font-size:%?26?%;color:#ccc;margin-top:%?10?%}.weui-panel__hd[data-v-6ecc62b6]:after{left:0}",""])},"2a5a":function(e,t,i){"use strict";i.r(t);var a=i("e76f"),n=i.n(a);for(var o in a)"default"!==o&&function(e){i.d(t,e,function(){return a[e]})}(o);t["default"]=n.a},"33a0":function(e,t,i){var a=i("0f57");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var n=i("4f06").default;n("6cd7d146",a,!0,{sourceMap:!1,shadowMode:!1})},"503a":function(e,t,i){"use strict";var a=i("288e");i("a481");var n=a(i("e814"));i("28a5"),i("6b54"),i("87b3");var o=function(e){var t=e.getFullYear(),i=e.getMonth()+1,a=e.getDate(),n=e.getHours(),o=e.getMinutes(),r=e.getSeconds();return[t,i,a].map(s).join("/")+" "+[n,o,r].map(s).join(":")},s=function(e){return(e=e.toString())[1]?e:"0"+e};function r(e,t){var i=e.split("-"),a=t.split("-"),o=new Date((0,n.default)(i[0]),(0,n.default)(i[1])-1,(0,n.default)(i[2]),0,0,0),s=new Date((0,n.default)(a[0]),(0,n.default)(a[1])-1,(0,n.default)(a[2]),0,0,0);return!(o.getTime()>=s.getTime())||(console.log("结束日期不能小于开始日期",this),!1)}function c(e,t){var i=e.split("-"),a=t.split("-"),o=new Date((0,n.default)(i[0]),(0,n.default)(i[1])-1,(0,n.default)(i[2]),0,0,0),s=new Date((0,n.default)(a[0]),(0,n.default)(a[1])-1,(0,n.default)(a[2]),0,0,0);return!(o.getTime()>s.getTime())||(console.log("结束日期不能小于开始日期",this),!1)}function l(){for(var e=""+Math.round(1e6*Math.random());e.length<6;)e="0"+e;return console.info("randomNum is ========",e),e}function u(e,t){for(var i=0;i<t.length;i++)if(t[i]==e)return 1;return 2}function d(e,t,i,a){t=t||0,i=i||0,a=a||0;var n=(e=e||0)*Math.PI/180,o=i*Math.PI/180,s=n-o,r=t*Math.PI/180-a*Math.PI/180;return 12756274*Math.asin(Math.sqrt(Math.pow(Math.sin(s/2),2)+Math.cos(n)*Math.cos(o)*Math.pow(Math.sin(r/2),2)))}function f(){var e=new Date,t=e.getMonth()+1,i=e.getDate();return 1<=t&&t<=9&&(t="0"+t),0<=i&&i<=9&&(i="0"+i),e.getFullYear()+"/"+t+"/"+i+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()}function g(e,t){var i=new Date(e.replace(/-/g,"/")),a=new Date(t),o=(0,n.default)((a.getTime()-i.getTime())/1e3),s=Math.floor(o/86400/365);o%=31536e3;var r=Math.floor(o/86400/30);o%=2592e3;var c=Math.floor(o/86400);o%=86400;var l=Math.floor(o/3600);o%=3600;var u=Math.floor(o/60),d=o%=60;console.log(s,r,c,l,u,d);var f={};return f.day=c,f.hour=l,f.minute=u,f}function b(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+i(t.getMonth()+1,2)+"-"+i(t.getDate(),2)+" "+i(t.getHours(),2)+":"+i(t.getMinutes(),2)+":"+i(t.getSeconds(),2);function i(e,t){for(var i=""+e,a=i.length,n="",o=t;o-- >a;)n+="0";return n+i}}function p(e){for(var t=0,i=0;i<e.length;i++){var a=e.charCodeAt(i);a>=1&&a<=126||65376<=a&&a<=65439?t++:t+=2}return t}e.exports={strlen:p,formatTime:o,getRandomNum:l,in_array:u,getDistance:d,validTime:r,validTime1:c,getNowFormatDate:f,xctsfm:g,ormatDate:b}},"94ae":function(e,t,i){"use strict";i.r(t);var a=i("b315"),n=i("2a5a");for(var o in n)"default"!==o&&function(e){i.d(t,e,function(){return n[e]})}(o);i("b3e4");var s=i("2877"),r=Object(s["a"])(n["default"],a["a"],a["b"],!1,null,"6ecc62b6",null);t["default"]=r.exports},b315:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-scroll-view",{staticClass:"films",style:"height:"+e.scrollHeight+"px",attrs:{"scroll-y":"true"},on:{scrolltolower:function(t){t=e.$handleEvent(t),e.sljz(t)}}},[i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"page__bd"},[i("v-uni-view",{staticClass:"weui-panel__hd"},[i("v-uni-view",{staticClass:"weui-search-bar"},[i("v-uni-view",{staticClass:"weui-search-bar__form"},[i("v-uni-view",{staticClass:"weui-search-bar__box"},[i("v-uni-icon",{staticClass:"weui-icon-search_in-box",attrs:{size:"16",type:"search"}}),i("v-uni-input",{staticClass:"weui-search-bar__input",attrs:{focus:e.inputShowed,placeholder:"搜索",type:"text",value:e.inputVal},on:{input:function(t){t=e.$handleEvent(t),e.inputTyping(t)}}}),e.inputVal.length>0?i("v-uni-view",{staticClass:"weui-icon-clear",on:{click:function(t){t=e.$handleEvent(t),e.clearInput(t)}}},[i("v-uni-icon",{attrs:{size:"14",type:"clear"}})],1):e._e()],1),e.inputShowed?e._e():i("v-uni-label",{staticClass:"weui-search-bar__label",on:{click:function(t){t=e.$handleEvent(t),e.showInput(t)}}},[i("v-uni-icon",{staticClass:"weui-icon-search",attrs:{size:"16",type:"search"}}),i("v-uni-view",{staticClass:"weui-search-bar__text"},[e._v("搜索")])],1)],1),e.inputShowed?i("v-uni-view",{staticClass:"weui-search-bar__cancel-btn",on:{click:function(t){t=e.$handleEvent(t),e.searchData(t)}}},[e._v("搜索")]):e._e()],1),e.searchLogShowed?i("v-uni-view",[e._l(e.searchLogList,function(t,a){return i("v-uni-view",{key:a,staticClass:"search-log",attrs:{"data-log":t},on:{click:function(t){t=e.$handleEvent(t),e.searchDataByLog(t)}}},[e._v(e._s(t))])}),i("v-uni-view",{staticClass:"clear-search-log",on:{click:function(t){t=e.$handleEvent(t),e.clearSearchLog(t)}}},[i("v-uni-image",{attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/ljt.png"}})],1)],2):e._e()],1),e.qqsj?e._e():i("v-uni-view",{staticClass:"jzz"},[i("v-uni-image",{staticClass:"Rotation",attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/jzz.png"}}),i("v-uni-view",[e._v("加载中...")])],1),e.qqsj?[e._l(e.mdlist,function(t,a){return 0!=e.mdlist.length?i("v-uni-navigator",{key:a,staticClass:"main-list",attrs:{url:"sjdl?sjid="+t.id}},[i("v-uni-view",{staticClass:"main-left"},[i("v-uni-image",{attrs:{mode:"aspectFill",src:"http://spb2u1.ihogu.com/attachment/"+t.md_logo}})],1),i("v-uni-view",{staticClass:"main-right"},[i("v-uni-view",{staticClass:"main-rh"},[i("v-uni-view",{staticClass:"mr1 gobyndsingle"},[e._v(e._s(t.md_name))]),i("v-uni-view",{staticClass:"mr6"},[i("v-uni-image",{attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/huo.png"}}),i("v-uni-text",[e._v("人气")]),i("v-uni-text",[e._v(e._s(t.rq))])],1)],1),i("v-uni-view",{staticClass:"mr2"},[i("v-uni-view",{staticClass:"text2-xj"},["0.0"!=t.score?i("v-uni-view",{staticClass:"pingjia_fenshu3"},[i("v-uni-view",{staticClass:"kximg"},[i("v-uni-image",{attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/i-star.png"}})],1),i("v-uni-view",{staticClass:"sximg",style:"width: "+20*t.score+"%"},[i("v-uni-image",{attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/i-stars.png"}})],1)],1):e._e(),"0.0"!=t.score?i("v-uni-view",{staticClass:"text2-fs"},[e._v(e._s(t.score)+"分")]):i("v-uni-view",{staticClass:"text2-fs"},[e._v("暂无评分")])],1),i("v-uni-view",{staticClass:"mr2-right"},[i("v-uni-image",{attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/ditu2.png"}}),i("v-uni-text",[e._v(e._s(t.distance))])],1)],1),i("v-uni-view",{staticClass:"mr3"},[e._v("商家地址："+e._s(t.address))]),i("v-uni-view",{staticClass:"mr4"},[i("v-uni-view",{staticClass:"mr4-1"},[e._v("免")]),i("v-uni-view",{staticClass:"mr4-2"},[e._v("免费券")])],1),"代金券 CASH COUPON"==t.kqname?i("v-uni-view",{staticClass:"mr5"},[i("v-uni-view",{staticClass:"mr5-1",staticStyle:{background:"#ff5e5b"}},[e._v("金")]),i("v-uni-view",{staticClass:"mr5-2"},[e._v(e._s(t.cost)+"代金券")]),i("v-uni-view",{staticClass:"mr5-3"},[e._v(e._s(t.conditions))])],1):e._e(),"就餐券 Meal Voucher"==t.kqname?i("v-uni-view",{staticClass:"mr5"},[i("v-uni-view",{staticClass:"mr5-1",staticStyle:{background:"#ff5e5b"}},[e._v("金")]),i("v-uni-view",{staticClass:"mr5-2"},[e._v(e._s(t.cost)+"就餐券")]),i("v-uni-view",{staticClass:"mr5-3"},[e._v(e._s(t.conditions))])],1):e._e(),"折扣券 Discount coupon"==t.kqname?i("v-uni-view",{staticClass:"mr5"},[i("v-uni-view",{staticClass:"mr5-1"},[e._v("折")]),i("v-uni-view",{staticClass:"mr5-2"},[e._v(e._s(t.cost)+"折券")]),i("v-uni-view",{staticClass:"mr5-3"},[e._v(e._s(t.conditions))])],1):e._e()],1)],1):e._e()}),e.jzgd?e._e():i("v-uni-view",{staticClass:"jzz"},[i("v-uni-image",{staticClass:"Rotation",attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/jzz.png"}}),i("v-uni-view",[e._v("加载更多...")])],1),0==e.mdlist.length?i("v-uni-view",{staticClass:"kong"},[i("v-uni-image",{attrs:{src:"https://temp-customs-1251903635.cos.ap-chengdu.myqcloud.com/Spb2u.net%20NewZealand/spb2u%20wxapp/zaozao%20kuaigou/new_wxapp/wsj.png"}}),i("v-uni-view",[e._v("暂无符合您搜索内容的商家...")])],1):e._e()]:e._e()],2),i("v-uni-view",{staticClass:"page__ft"})],1)],1)},n=[];i.d(t,"a",function(){return a}),i.d(t,"b",function(){return n})},b3e4:function(e,t,i){"use strict";var a=i("33a0"),n=i.n(a);n.a},e76f:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,n=getApp(),o=i("f53d"),s=i("503a"),r="",c={data:function(){return{qqsj:!0,msgList:[],searchLogList:[],hidden:!0,scrollTop:0,inputShowed:!1,inputVal:"",searchLogShowed:!0,scrollHeight:0,pagenum:1,storelist:[],mygd:!1,jzgd:!0,windowHeight:"",windowWidth:"",url:"",mdxx:"",weizhi:"",mdlist:""}},components:{},props:{},onLoad:function(e){var t=this,i=getApp().imgurl;uni.getSystemInfo({success:function(e){t.setData({windowHeight:e.windowHeight,windowWidth:e.windowWidth,searchLogList:uni.getStorageSync("searchLog")||[],url:i})}}),n.globalData.util.request({url:"entry/wxapp/GetMapKey",cachetime:"0",success:function(e){console.log(e),a=new o({key:e.map_key}),t.setData({mdxx:e})}}),uni.getSystemInfo({success:function(e){t.setData({scrollHeight:e.windowHeight})}})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},methods:{sljz:function(){console.log("上拉加载",this.pagenum),!this.mygd&&this.jzgd?(this.setData({jzgd:!1}),this.jzgdFun(r)):uni.showToast({title:"没有更多了",icon:"loading",duration:1e3})},reLoad:function(e){this.setData({qqsj:!1}),this.jzgdFun(e)},jzgdFun:function(e){var t=this;uni.getLocation({type:"wgs84",success:function(i){var o=i.latitude,r=i.longitude,c=o+","+r;console.log(c),a.reverseGeocoder({location:{latitude:o,longitude:r},coord_type:1,success:function(i){i.result.ad_info.location,console.log(i),console.log(i.result.formatted_addresses.recommend),console.log("坐标转地址后的经纬度：",i.result.ad_info.location),t.setData({weizhi:i.result.formatted_addresses.recommend}),n.globalData.util.request({url:"entry/wxapp/MdList",cachetime:"0",data:{lat:o,lng:r,keywords:e,page:t.pagenum,pagesize:5},success:function(e){console.log("分页返回的门店列表数据",e),0==e.length?(t.setData({mygd:!0,jzgd:!0}),uni.showToast({title:"没有更多了",icon:"loading",duration:1e3})):t.setData({jzgd:!0,pagenum:t.pagenum+1});var i=t.storelist;i=i.concat(e);for(var a=0;a<i.length;a++){var n=s.getDistance(o,r,i[a].lat,i[a].lng).toFixed(2);i[a].distance=n<1e3?n+"m":(n/1e3).toFixed(2)+"km"}t.setData({mdlist:i,qqsj:!0,storelist:i}),console.log(i)}})},fail:function(e){console.log(e)},complete:function(e){console.log(e)}})}})},tzsj:function(e){console.log(e.currentTarget.dataset.src),uni.navigateTo({url:e.currentTarget.dataset.src})},scroll:function(e){this.setData({scrollTop:e.detail.scrollTop})},showInput:function(){""!=uni.getStorageSync("searchLog")?this.setData({inputShowed:!0,searchLogShowed:!0,searchLogList:uni.getStorageSync("searchLog")}):this.setData({inputShowed:!0,searchLogShowed:!0})},searchData:function(){console.log(r);var e=this;if(e.setData({msgList:[],scrollTop:0,storelist:[],pagenum:1,mygd:!1}),""!=r){var t=e.searchLogList;-1===t.indexOf(r)&&(t.unshift(r),uni.setStorageSync("searchLog",t),e.setData({searchLogList:uni.getStorageSync("searchLog")})),e.reLoad(r)}else uni.showToast({title:"搜索内容为空",icon:"loading",duration:1e3})},clearInput:function(){this.setData({msgList:[],scrollTop:0,inputVal:""}),r=""},inputTyping:function(e){""!=uni.getStorageSync("searchLog")?this.setData({inputVal:e.detail.value,searchLogList:uni.getStorageSync("searchLog")}):this.setData({inputVal:e.detail.value,searchLogShowed:!0}),r=e.detail.value},searchDataByLog:function(e){r=e.target.dataset.log,console.log(e.target.dataset.log),this.setData({msgList:[],scrollTop:0,inputShowed:!0,inputVal:r}),this.searchData()},clearSearchLog:function(){this.setData({hidden:!1}),uni.removeStorageSync("searchLog"),this.setData({scrollTop:0,hidden:!0,searchLogList:[]})}}};t.default=c},f53d:function(e,t,i){"use strict";var a=i("288e");i("28a5");var n=a(i("85f2")),o=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),(0,n.default)(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r={KEY_ERR:311,KEY_ERR_MSG:"key格式错误",PARAM_ERR:310,PARAM_ERR_MSG:"请求参数信息有误",SYSTEM_ERR:600,SYSTEM_ERR_MSG:"系统错误",WX_ERR_CODE:1e3,WX_OK_CODE:200},c="https://apis.map.qq.com/ws/",l=c+"place/v1/search",u=c+"place/v1/suggestion",d=c+"geocoder/v1/",f=c+"district/v1/list",g=c+"district/v1/getchildren",b=c+"distance/v1/",p={location2query:function(e){if("string"==typeof e)return e;for(var t="",i=0;i<e.length;i++){var a=e[i];t&&(t+=";"),a.location&&(t=t+a.location.lat+","+a.location.lng),a.latitude&&a.longitude&&(t=t+a.latitude+","+a.longitude)}return t},getWXLocation:function(e,t,i){uni.getLocation({type:"gcj02",success:e,fail:t,complete:i})},getLocationParam:function(e){return"string"==typeof e&&(e=2===e.split(",").length?{latitude:e.split(",")[0],longitude:e.split(",")[1]}:{}),e},polyfillParam:function(e){e.success=e.success||function(){},e.fail=e.fail||function(){},e.complete=e.complete||function(){}},checkParamKeyEmpty:function(e,t){if(!e[t]){var i=this.buildErrorConfig(r.PARAM_ERR,r.PARAM_ERR_MSG+t+"参数格式有误");return e.fail(i),e.complete(i),!0}return!1},checkKeyword:function(e){return!this.checkParamKeyEmpty(e,"keyword")},checkLocation:function(e){var t=this.getLocationParam(e.location);if(!t||!t.latitude||!t.longitude){var i=this.buildErrorConfig(r.PARAM_ERR,r.PARAM_ERR_MSG+" location参数格式有误");return e.fail(i),e.complete(i),!1}return!0},buildErrorConfig:function(e,t){return{status:e,message:t}},buildWxRequestConfig:function(e,t){var i=this;return t.header={"content-type":"application/json"},t.method="GET",t.success=function(t){var i=t.data;0===i.status?e.success(i):e.fail(i)},t.fail=function(t){t.statusCode=r.WX_ERR_CODE,e.fail(i.buildErrorConfig(r.WX_ERR_CODE,result.errMsg))},t.complete=function(t){switch(+t.statusCode){case r.WX_ERR_CODE:e.complete(i.buildErrorConfig(r.WX_ERR_CODE,t.errMsg));break;case r.WX_OK_CODE:var a=t.data;0===a.status?e.complete(a):e.complete(i.buildErrorConfig(a.status,a.message));break;default:e.complete(i.buildErrorConfig(r.SYSTEM_ERR,r.SYSTEM_ERR_MSG))}},t},locationProcess:function(e,t,i,a){var n=this;i=i||function(t){t.statusCode=r.WX_ERR_CODE,e.fail(n.buildErrorConfig(r.WX_ERR_CODE,t.errMsg))},a=a||function(t){t.statusCode==r.WX_ERR_CODE&&e.complete(n.buildErrorConfig(r.WX_ERR_CODE,t.errMsg))},e.location?n.checkLocation(e)&&t(p.getLocationParam(e.location)):n.getWXLocation(t,i,a)}},w=function(){function e(t){if(s(this,e),!t.key)throw Error("key值不能为空");this.key=t.key}return o(e,[{key:"search",value:function(e){if(e=e||{},p.polyfillParam(e),p.checkKeyword(e)){var t={keyword:e.keyword,orderby:e.orderby||"_distance",page_size:e.page_size||10,page_index:e.page_index||1,output:"json",key:this.key};e.address_format&&(t.address_format=e.address_format),e.filter&&(t.filter=e.filter);var i=e.distance||"1000",a=e.auto_extend||1;p.locationProcess(e,function(n){t.boundary="nearby("+n.latitude+","+n.longitude+","+i+","+a+")",uni.request(p.buildWxRequestConfig(e,{url:l,data:t}))})}}},{key:"getSuggestion",value:function(e){if(e=e||{},p.polyfillParam(e),p.checkKeyword(e)){var t={keyword:e.keyword,region:e.region||"全国",region_fix:e.region_fix||0,policy:e.policy||0,output:"json",key:this.key};uni.request(p.buildWxRequestConfig(e,{url:u,data:t}))}}},{key:"reverseGeocoder",value:function(e){e=e||{},p.polyfillParam(e);var t={coord_type:e.coord_type||5,get_poi:e.get_poi||0,output:"json",key:this.key};e.poi_options&&(t.poi_options=e.poi_options),p.locationProcess(e,function(i){t.location=i.latitude+","+i.longitude,uni.request(p.buildWxRequestConfig(e,{url:d,data:t}))})}},{key:"geocoder",value:function(e){if(e=e||{},p.polyfillParam(e),!p.checkParamKeyEmpty(e,"address")){var t={address:e.address,output:"json",key:this.key};uni.request(p.buildWxRequestConfig(e,{url:d,data:t}))}}},{key:"getCityList",value:function(e){e=e||{},p.polyfillParam(e);var t={output:"json",key:this.key};uni.request(p.buildWxRequestConfig(e,{url:f,data:t}))}},{key:"getDistrictByCityId",value:function(e){if(e=e||{},p.polyfillParam(e),!p.checkParamKeyEmpty(e,"id")){var t={id:e.id||"",output:"json",key:this.key};uni.request(p.buildWxRequestConfig(e,{url:g,data:t}))}}},{key:"calculateDistance",value:function(e){if(e=e||{},p.polyfillParam(e),!p.checkParamKeyEmpty(e,"to")){var t={mode:e.mode||"walking",to:p.location2query(e.to),output:"json",key:this.key};e.from&&(e.location=e.from),p.locationProcess(e,function(i){t.from=i.latitude+","+i.longitude,uni.request(p.buildWxRequestConfig(e,{url:b,data:t}))})}}}]),e}();e.exports=w}}]);